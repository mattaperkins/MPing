.TH MPING-MULTI 1 "January 2025" "Version 1.0" "User Commands"
.SH NAME
mping-multi \- multi-host curses ping monitor with Unicode bar graphs

.SH SYNOPSIS
.B mping-multi
[\-i ms] [\-t sec] [\-w window]
[\-\-blocks] [\-\-dots]
[\-\-slow-ms ms]
[\-\-max-lat-ms ms]
[\-\-blocks-mode {avg|last}]
[\-\-blocks-avg N]
[\-\-cols N] [\-\-tty80]
[\-\-csv-out file]
host ...

.SH DESCRIPTION
.B mping-multi
is an interactive curses-based multi-host ping visualiser.  
It performs concurrent ICMP echo requests to multiple hosts and displays
live per-host statistics in a scrolling dashboard, including:

.IP \(bu 2
Unicode block latency bars (proportional to RTT)
.IP \(bu
Dots-mode progress graphs similar to classic mping
.IP \(bu
Packet loss %, jitter, last RTT, rolling average RTT, min, and max
.IP \(bu
mping-style colour status (green/amber/red)
.IP \(bu
Optional CSV logging of all metrics to a file

The display automatically adapts to terminal width and can optionally
force 80-column compatibility.

.SH FEATURES
.TP
.B Unicode latency bars
Blocks mode renders latency proportionally using solid and light blocks.

.TP
.B Dots mode
A left-to-right "progress" bar that resets on timeout or after reaching the right edge.

.TP
.B Jitter calculation
Computed as the absolute difference between the current RTT and the previous RTT.

.TP
.B mping-style colouring
Green for normal, yellow for slow RTT, red for any loss in the current window.

.TP
.B CSV output
All metrics (except the graphical bar) can be logged continuously
to a CSV file via:
.RS
.nf
--csv-out filename
.fi
.RE

.TP
.B macOS and Linux support
The tool handles macOS timeout semantics automatically (-W milliseconds).

.SH OPTIONS

.TP
.BR -i " ms, " --interval-ms =ms
Interval between probes for each host (milliseconds).
Default: 1000ms.

.TP
.BR -t " sec, " --timeout =sec
Ping timeout (seconds).  
On macOS this is converted to milliseconds.

.TP
.BR -w " N, " --window =N
Rolling window size for loss statistics. Default: 60.

.TP
.BR --blocks
Start in blocks (latency bar) mode (default).

.TP
.BR --dots
Start in dots mode.

.TP
.BR --slow-ms =ms
Threshold RTT for yellow state (default: 150ms).

.TP
.BR --max-lat-ms =ms
RTT mapped to full-width in blocks mode. Default: 120ms.

.TP
.BR --blocks-mode " {avg|last}"
Use moving average or last RTT for block bar calculation.

.TP
.BR --blocks-avg " N"
Number of samples in the ring buffer for average-calculation. Default: 5.

.TP
.BR --cols " N"
Force output to a specific number of columns.

.TP
.BR --tty80
Equivalent to \fB--cols 80\fR.

.TP
.BR --csv-out " file"
Write all statistics to CSV in real time.  
Fields include:
.RS
.nf
timestamp,host,sent,recv,loss_pct,
jitter,last_rtt,avg_rtt,min,max
.fi
.RE

.TP
.I host ...
One or more hostnames or IP addresses to ping.

.SH DISPLAY COLUMNS

.TS
l l.
Host         Name or IP, width auto-adjusted
Sent         Total packets sent
Recv         Total packets received
Loss%        Percentage of lost packets in window
Jitt         Jitter (abs difference between RTT samples)
Last         Most recent RTT measurement
Avg          Running average RTT
Min          Minimum RTT seen
Max          Maximum RTT seen
Bar          Unicode latency/dot graph
.TE

.SH KEYBOARD COMMANDS

.TP
.B q
Quit.

.TP
.B s
Toggle between blocks and dots mode.

.TP
.B +
Increase bar width.

.TP
.B -
Decrease bar width.

.TP
.B r
Reset all per-host statistics.

.SH CSV FORMAT
The CSV logger outputs one line per host per update:

.RS
.nf
timestamp,host,sent,recv,loss_pct,jitter,last_rtt,avg_rtt,min,max
.fi
.RE

Timestamp is UNIX epoch seconds with fractional precision.

.SH EXIT STATUS
Returns 0 on clean exit.

.SH AUTHOR
Written by Matt Perkins.

.SH VERSION
Version 1.0

.SH COPYRIGHT
Copyright Â© 2025 Matt Perkins.

.SH SEE ALSO
ping(8), mping(1)
